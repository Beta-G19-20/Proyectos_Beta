<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{css/reset.css}">
    <link rel="stylesheet" th:href="@{css/stylesstablamovimientodinero.css}">
    <title>Sistema de gestión de Ingresos y Gastos</title>
</head>
<body>
   
    <div class="lines">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
    
        <h1 class="titulo">Sistema de Gestión de Ingresos y Gastos</h1>
        <h2 class="subtitulo">Ingresos y Egresos</h2>
        

            <header class="contheader"> 
                <div class="logo"></div>
                <input class="ingresosyegresos" type="submit" value="Ingresos y Egresos">
                <input class="usuarios" type="submit" value="Usuarios">
                <input class="empresas" type="submit" value="Empresas">
            </header>
            
            <main class="main">
                
                <fieldset class="fi">
                    <a th:href="@{'movimientoDinero/newmovd'}"><input class="boton" type="submit" value="Nuevo"></a>
<table id="miTabla">
    <thead>
        <tr>
            <th>ID de Movimiento</th>
            <th>Concepto</th>
            <th>Monto</th>
            <th>Fecha</th>
            <th>Usuario</th>
            <th>Consultar</th>
            <th>Eliminar</th>
        </tr>
        <tfoot>
            <tr>
                <td colspan=2 class="totalx">Total</td>
                <td></td>
                <th>
                    <button>Calcular</button>  
                </th>
            </tr>
        </tfoot>
    </thead>

    <tr th:each="i:${MovimientosDineros}">
        <td th:text="${i.idMovimiento}"></td>
        <td th:text="${i.Concepto}"></td>
        <td th:text="${i.Monto}"></td>
        <td th:text="${i.Fecha}"></td>
        <td th:text="${i.Usuario}"></td>
        <td><a th:href="@{'MovimientosDinero/actualizar'+'/'+${i.idMovimiento}}">Consultar</a></td>
        <td><a th:href="@{'MovimientosDinero/eliminar'+'/'+${i.idMovimiento}}">Eliminar</a></td>
    </tr>
    </tbody>
</table>

<script>
document.getElementsByTagName("button")[0].addEventListener("click",calcular);
function calcular() {
var filas=document.querySelectorAll("#miTabla tbody tr");
var total=0;
filas.forEach(function(e) {
    var columnas=e.querySelectorAll("td");
    var Monto=parseFloat(columnas[2].textContent);
    total+=Monto;
});
var filas=document.querySelectorAll("#miTabla tfoot tr td");
filas[1].textContent=total.toLocaleString(2);
}
</script> 
        </fieldset>
 
    </main>       
</body>
</html>